<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelime Hazine Sandƒ±ƒüƒ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

         body {
             font-family: 'Arial', sans-serif;
             background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
             min-height: 100vh;
             display: flex;
             justify-content: center;
             align-items: center;
             overflow: hidden;
             touch-action: manipulation;
             -webkit-touch-callout: none;
             -webkit-user-select: none;
             -khtml-user-select: none;
             -moz-user-select: none;
             -ms-user-select: none;
             user-select: none;
         }

        .game-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
        }

        .game-header {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 100;
        }

        .game-title {
            color: #fff;
            font-size: 2.5em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }

        .score-board {
            background: rgba(255,255,255,0.2);
            padding: 15px 30px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
        }

        .score {
            color: #fff;
            font-size: 1.5em;
            font-weight: bold;
        }

        .treasure-chest {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 250px;
            height: 200px;
            background-image: url('Hazine2.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 50;
            overflow: visible;
        }

        .treasure-chest.open {
            background-image: url('Hazine1.png');
            animation: chestOpen 0.8s ease-in-out;
        }

        .treasure-content {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            height: 140px;
            overflow: hidden;
            display: flex;
            flex-wrap: wrap;
            align-content: flex-end;
            gap: 5px;
            padding: 5px;
        }

        .collected-word {
            background: linear-gradient(145deg, #FFD700, #FFA500);
            color: #333;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: bold;
            border: 2px solid #FFA500;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            animation: wordCollect 0.5s ease-in;
        }

        @keyframes wordCollect {
            0% { 
                transform: scale(0) rotate(180deg);
                opacity: 0;
            }
            100% { 
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .treasure-chest:hover {
            transform: translateX(-50%) scale(1.05);
        }

        .treasure-chest.locked {
            background-image: url('Hazine3.png');
            animation: chestShake 0.5s ease-in-out;
        }

        @keyframes chestShake {
            0% { transform: translateX(-50%) translateX(0px); }
            25% { transform: translateX(-50%) translateX(-5px); }
            75% { transform: translateX(-50%) translateX(5px); }
            100% { transform: translateX(-50%) translateX(0px); }
        }

        .definition-box {
            position: absolute;
            bottom: 280px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,255,255,0.95);
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 3px solid #FFD700;
            min-width: 300px;
            text-align: center;
        }

        .definition-text {
            font-size: 1.3em;
            color: #333;
            font-weight: bold;
            line-height: 1.4;
        }

        .word-coins {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

         .word-coin {
             position: absolute;
             width: 80px;
             height: 80px;
             background: linear-gradient(145deg, #FFD700, #FFA500);
             border-radius: 50%;
             display: flex;
             align-items: center;
             justify-content: center;
             font-weight: bold;
             font-size: 0.9em;
             color: #333;
             cursor: grab;
             box-shadow: 0 5px 15px rgba(0,0,0,0.3);
             transition: all 0.3s ease;
             border: 3px solid #FFA500;
             text-align: center;
             line-height: 1.2;
             padding: 5px;
             touch-action: none;
             user-select: none;
             -webkit-user-select: none;
             -moz-user-select: none;
             -ms-user-select: none;
         }

         .word-coin:hover {
             transform: scale(1.1);
             box-shadow: 0 8px 25px rgba(0,0,0,0.4);
         }

         @media (hover: none) {
             .word-coin:hover {
                 transform: none;
                 box-shadow: 0 5px 15px rgba(0,0,0,0.3);
             }
         }

        .word-coin:active {
            cursor: grabbing;
        }

         .word-coin.dragging {
             opacity: 0.8;
             transform: scale(1.2);
             z-index: 1000;
         }

         .word-coin.touching {
             opacity: 0.8;
             transform: scale(1.2);
             z-index: 1000;
         }

        .word-coin.correct {
            animation: correctAnswer 1s ease-in-out;
        }

        .word-coin.wrong {
            animation: wrongAnswer 0.5s ease-in-out;
        }

        .game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 200;
        }

        .game-over-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .final-score {
            font-size: 2em;
            color: #333;
            margin-bottom: 20px;
        }

        .restart-btn {
            background: linear-gradient(145deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        @keyframes sparkle {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.2); }
        }

        @keyframes chestOpen {
            0% { 
                transform: translateX(-50%) scale(1); 
            }
            30% { 
                transform: translateX(-50%) scale(1.05); 
            }
            70% { 
                transform: translateX(-50%) scale(1.1); 
            }
            100% { 
                transform: translateX(-50%) scale(1); 
            }
        }

        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); background: #4CAF50; }
            100% { transform: scale(1); }
        }

        @keyframes wrongAnswer {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }

        .timer {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            padding: 15px 25px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
        }

        .timer-text {
            color: #fff;
            font-size: 1.5em;
            font-weight: bold;
        }

        .timer.warning {
            background: rgba(255,0,0,0.3);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .stars-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .star {
            position: absolute;
            color: #FFD700;
            font-size: 2em;
            animation: starExplosion 1.5s ease-out forwards;
        }

        @keyframes starExplosion {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1.5) rotate(180deg);
                opacity: 1;
            }
            100% {
                transform: scale(0.5) rotate(360deg);
                opacity: 0;
            }
        }

        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 300;
        }

        .start-content {
            background: white;
            padding: 50px;
            border-radius: 25px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 500px;
        }

        .start-title {
            font-size: 2.5em;
            color: #333;
            margin-bottom: 20px;
        }

        .start-description {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .start-btn {
            background: linear-gradient(145deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 30px;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        .settings-section {
            margin: 25px 0;
            text-align: center;
        }

        .settings-section label {
            display: block;
            font-size: 1.1em;
            color: #333;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .time-select {
            background: white;
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 10px 20px;
            font-size: 1em;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .time-select:hover {
            border-color: #764ba2;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .time-select:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(118, 75, 162, 0.2);
        }

        .coin-fly-animation {
            animation: coinFly 1s ease-in forwards;
        }

        @keyframes coinFly {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(0.8);
            }
            100% {
                transform: scale(0) translateY(-50px);
                opacity: 0;
            }
        }

        .teacher-signature {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 100;
        }

        .signature-content {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(102, 126, 234, 0.3);
            text-align: center;
            transition: all 0.3s ease;
        }

        .signature-content:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            border-color: rgba(102, 126, 234, 0.5);
        }

        .signature-title {
            font-size: 0.9em;
            color: #666;
            font-weight: 500;
            margin-bottom: 5px;
            letter-spacing: 0.5px;
        }

        .signature-name {
            font-size: 1.1em;
            color: #333;
            font-weight: bold;
            letter-spacing: 1px;
        }

         .game-over-content h2 small {
             display: block;
             font-size: 0.7em;
             color: #666;
             margin-top: 10px;
             line-height: 1.4;
             font-weight: normal;
         }

         .project-info {
             position: absolute;
             bottom: 20px;
             left: 20px;
             z-index: 100;
         }

         .project-content {
             background: rgba(255, 255, 255, 0.9);
             padding: 10px 15px;
             border-radius: 10px;
             box-shadow: 0 3px 15px rgba(0, 0, 0, 0.15);
             backdrop-filter: blur(8px);
             border: 1px solid rgba(102, 126, 234, 0.2);
             text-align: left;
             transition: all 0.3s ease;
         }

         .project-content:hover {
             transform: scale(1.02);
             box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
             border-color: rgba(102, 126, 234, 0.3);
         }

         .project-text {
             font-size: 11px;
             color: #333;
             font-weight: 500;
             line-height: 1.3;
             margin: 0;
         }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1 class="game-title">Kelime Hazine Sandƒ±ƒüƒ±</h1>
            <div class="score-board">
                <div class="score">Puan: <span id="score">0</span></div>
            </div>
        </div>

        <div class="timer">
            <div class="timer-text">‚è∞ <span id="timer">60</span>s</div>
        </div>

        <div class="definition-box">
            <div class="definition-text" id="current-definition">
                Ayakla oynanan top oyunu
            </div>
        </div>

        <div class="treasure-chest" id="treasure-chest">
            <div class="treasure-content" id="treasure-content">
                <!-- Toplanan kelimeler burada g√∂r√ºnecek -->
            </div>
        </div>

        <div class="word-coins" id="word-coins">
            <!-- Kelime paralarƒ± JavaScript ile eklenecek -->
        </div>

        <div class="start-screen" id="start-screen">
            <div class="start-content">
                <h1 class="start-title">Kelime Hazine Sandƒ±ƒüƒ±</h1>
                <p class="start-description">
                    Hazine sandƒ±ƒüƒ±nƒ±n √ºzerindeki tanƒ±ma uygun kelime parasƒ±nƒ± s√ºr√ºkleyip sandƒ±ƒüa bƒ±rakƒ±n!<br>
                    Doƒüru cevaplarla puan kazanƒ±n ve hazineyi toplayƒ±n! ‚≠ê
                </p>
                
                <div class="settings-section">
                    <label for="game-time">‚è∞ Oyun S√ºresi:</label>
                    <select id="game-time" class="time-select">
                        <option value="60">1 Dakika</option>
                        <option value="120">2 Dakika</option>
                        <option value="180">3 Dakika</option>
                        <option value="300">5 Dakika</option>
                    </select>
                </div>
                
                <button class="start-btn" onclick="startGame()">üéÆ Oyunu Ba≈ülat</button>
            </div>
        </div>

        <div class="game-over" id="game-over">
            <div class="game-over-content">
                <h2 id="game-over-title">üéâ Oyun Bitti! üéâ</h2>
                <div class="final-score">Final Puanƒ±nƒ±z: <span id="final-score">0</span></div>
                <button class="restart-btn" onclick="restartGame()">üîÑ Tekrar Oyna</button>
            </div>
        </div>

        <div class="stars-container" id="stars-container"></div>
        
         <div class="teacher-signature">
             <div class="signature-content">
                 <div class="signature-title">T√ºrk√ße √ñƒüretmeni</div>
                 <div class="signature-name">Ramazan ≈ûANA</div>
             </div>
         </div>

         <div class="project-info">
             <div class="project-content">
                 <p class="project-text">Milli Eƒüitim Bakanlƒ±ƒüƒ±'nƒ±n Dinamik Ders Dili(D3) Projesi kapsamƒ±nda geli≈ütirilmi≈ütir.</p>
             </div>
         </div>
    </div>

    <script>
        // Oyun verileri
        const wordData = [
            { word: "tep√ºk", definition: "Ayakla oynanan top oyunu" },
            { word: "seyyah", definition: "Gezen, dola≈üan kimse" },
            { word: "medrese", definition: "ƒ∞slami eƒüitim veren okul" },
            { word: "himaye", definition: "Koruma, g√∂zetim" },
            { word: "m√ºderris", definition: "Medresede ders veren √∂ƒüretmen" },
            { word: "avlu", definition: "Bir yapƒ±nƒ±n ortasƒ±nda kalan, genellikle etrafƒ± duvarla √ßevrili, √ºst√º a√ßƒ±k alan" },
            { word: "emin", definition: "≈û√ºphesiz, kesin olarak inanan" },
            { word: "kargƒ±", definition: "Ucu sivri, uzun mƒ±zrak" },
            { word: "takdir", definition: "Beƒüenme, deƒüer verme, √∂vme" },
            { word: "disiplin", definition: "Sƒ±kƒ± d√ºzen, kurallara baƒülƒ±lƒ±k" },
            { word: "azim", definition: "Bir i≈üteki engelleri yenme kararlƒ±lƒ±ƒüƒ±" },
            { word: "m√ºkemmel", definition: "Kusursuz, eksiksiz, harika" },
            { word: "√¢lim", definition: "Bilgin, √ßok bilgili kimse" },
            { word: "ok", definition: "Yayla atƒ±lan, ucunda sivri bir demir bulunan ince ve kƒ±sa tahta √ßubuk" },
            { word: "ƒ∞lim", definition: "Bilim" },
            { word: "√∂zen g√∂stermek", definition: "Bir ≈üeyi √∂zenerek elden geldiƒüince iyi olmasƒ±na gayret ederek yapmak; itina etmek" },
            { word: "fidan", definition: "Yeni yeti≈üen aƒüa√ß veya aƒüa√ß√ßƒ±k" }
        ];

         let currentWordIndex = 0;
         let score = 0;
         let timeLeft = 60;
         let gameActive = false;
         let draggedElement = null;
         let usedPositions = [];
         let collectedWords = [];
         let touchStartPos = null;
         let touchElement = null;

        // Oyunu ba≈ülat
        function startGame() {
            // Se√ßilen s√ºreyi al
            const selectedTime = parseInt(document.getElementById('game-time').value);
            timeLeft = selectedTime;
            
            document.getElementById('start-screen').style.display = 'none';
            initGame();
        }

        function initGame() {
            score = 0;
            gameActive = true;
            // Rastgele kelime se√ß
            currentWordIndex = Math.floor(Math.random() * wordData.length);
            usedPositions = [];
            collectedWords = [];
            updateScore();
            updateTimer();
            createWordCoins();
            showCurrentDefinition();
            updateTreasureContent();
            startTimer();
        }

        // Kelime paralarƒ±nƒ± olu≈ütur
        function createWordCoins() {
            const container = document.getElementById('word-coins');
            container.innerHTML = '';
            usedPositions = [];
            
            // Mevcut kelimeyi hari√ß tutarak 10 kelime se√ß
            const availableWords = wordData.filter((_, index) => index !== currentWordIndex);
            const selectedWords = shuffleArray(availableWords).slice(0, 9);
            selectedWords.push(wordData[currentWordIndex]); // Doƒüru cevabƒ± ekle
            const shuffledWords = shuffleArray(selectedWords);

            shuffledWords.forEach((wordObj, index) => {
                const coin = document.createElement('div');
                coin.className = 'word-coin';
                // ƒ∞lk harfi b√ºy√ºk yap
                coin.textContent = wordObj.word.charAt(0).toUpperCase() + wordObj.word.slice(1);
                coin.draggable = true;
                coin.dataset.word = wordObj.word;
                
                // G√ºvenli pozisyon bul
                const position = findSafePosition();
                coin.style.left = position.x + 'px';
                coin.style.top = position.y + 'px';
                
                 // Drag olaylarƒ±nƒ± ekle
                 coin.addEventListener('dragstart', handleDragStart);
                 coin.addEventListener('dragend', handleDragEnd);
                 
                 // Touch olaylarƒ±nƒ± ekle
                 coin.addEventListener('touchstart', handleTouchStart, { passive: false });
                 coin.addEventListener('touchmove', handleTouchMove, { passive: false });
                 coin.addEventListener('touchend', handleTouchEnd, { passive: false });
                
                container.appendChild(coin);
            });
        }

        // G√ºvenli pozisyon bulma fonksiyonu
        function findSafePosition() {
            const coinSize = 80;
            const margin = 20;
            const maxAttempts = 100;
            
            // Yasaklƒ± alanlar
            const forbiddenAreas = [
                // Sandƒ±k alanƒ± (alt orta) - yeni boyutlar
                { x: window.innerWidth/2 - 125, y: window.innerHeight - 300, width: 250, height: 200 },
                 // Tanƒ±m kutusu alanƒ± (sandƒ±ƒüƒ±n √ºst√º) - en uzun tanƒ±ma g√∂re √ßok daha geni≈ü alan
                 { x: window.innerWidth/2 - 350, y: window.innerHeight - 600, width: 700, height: 250 },
                // √úst ba≈ülƒ±k alanƒ±
                { x: 0, y: 0, width: window.innerWidth, height: 150 },
                // Timer alanƒ± (saƒü √ºst)
                { x: window.innerWidth - 200, y: 0, width: 200, height: 100 },
                 // Saƒü alt k√∂≈üe - √∂ƒüretmen adƒ± alanƒ±
                 { x: window.innerWidth - 300, y: window.innerHeight - 100, width: 300, height: 100 },
                 // Sol alt k√∂≈üe - proje bilgisi alanƒ±
                 { x: 0, y: window.innerHeight - 80, width: 400, height: 80 }
            ];
            
            for (let attempt = 0; attempt < maxAttempts; attempt++) {
                const x = Math.random() * (window.innerWidth - coinSize - margin * 2) + margin;
                const y = Math.random() * (window.innerHeight - coinSize - margin * 2) + margin;
                
                // Yasaklƒ± alanlarƒ± kontrol et
                let isSafe = true;
                for (const area of forbiddenAreas) {
                    if (x < area.x + area.width && x + coinSize > area.x &&
                        y < area.y + area.height && y + coinSize > area.y) {
                        isSafe = false;
                        break;
                    }
                }
                
                // Diƒüer paralarla √ßakƒ±≈üma kontrol√º
                if (isSafe) {
                    for (const pos of usedPositions) {
                        const distance = Math.sqrt(Math.pow(x - pos.x, 2) + Math.pow(y - pos.y, 2));
                        if (distance < coinSize + margin) {
                            isSafe = false;
                            break;
                        }
                    }
                }
                
                if (isSafe) {
                    usedPositions.push({ x, y });
                    return { x, y };
                }
            }
            
            // Son √ßare: basit rastgele pozisyon
            const x = Math.random() * (window.innerWidth - coinSize);
            const y = Math.random() * (window.innerHeight - coinSize);
            usedPositions.push({ x, y });
            return { x, y };
        }

        // Mevcut tanƒ±mƒ± g√∂ster
        function showCurrentDefinition() {
            document.getElementById('current-definition').textContent = wordData[currentWordIndex].definition;
        }

        // Sandƒ±k i√ßeriƒüini g√ºncelle
        function updateTreasureContent() {
            const treasureContent = document.getElementById('treasure-content');
            treasureContent.innerHTML = '';
            
            collectedWords.forEach((word, index) => {
                const wordElement = document.createElement('div');
                wordElement.className = 'collected-word';
                wordElement.textContent = word;
                treasureContent.appendChild(wordElement);
            });
        }

        // Drag ba≈ülangƒ±cƒ±
        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

         // Drag biti≈üi
         function handleDragEnd(e) {
             e.target.classList.remove('dragging');
             draggedElement = null;
         }

         // Touch ba≈ülangƒ±cƒ±
         function handleTouchStart(e) {
             e.preventDefault();
             const touch = e.touches[0];
             touchElement = e.target;
             touchStartPos = {
                 x: touch.clientX,
                 y: touch.clientY,
                 elementX: parseFloat(e.target.style.left) || 0,
                 elementY: parseFloat(e.target.style.top) || 0
             };
             e.target.classList.add('touching');
         }

         // Touch hareketi
         function handleTouchMove(e) {
             e.preventDefault();
             if (!touchElement || !touchStartPos) return;
             
             const touch = e.touches[0];
             const deltaX = touch.clientX - touchStartPos.x;
             const deltaY = touch.clientY - touchStartPos.y;
             
             const newX = touchStartPos.elementX + deltaX;
             const newY = touchStartPos.elementY + deltaY;
             
             touchElement.style.left = newX + 'px';
             touchElement.style.top = newY + 'px';
         }

         // Touch biti≈üi
         function handleTouchEnd(e) {
             e.preventDefault();
             if (!touchElement) return;
             
             touchElement.classList.remove('touching');
             
             // Sandƒ±k alanƒ±nƒ± kontrol et
             const treasureChest = document.getElementById('treasure-chest');
             const chestRect = treasureChest.getBoundingClientRect();
             const elementRect = touchElement.getBoundingClientRect();
             
             // Element sandƒ±k √ºzerinde mi kontrol et
             if (elementRect.left < chestRect.right &&
                 elementRect.right > chestRect.left &&
                 elementRect.top < chestRect.bottom &&
                 elementRect.bottom > chestRect.top) {
                 checkAnswer(touchElement);
             }
             
             touchElement = null;
             touchStartPos = null;
         }

        // Sandƒ±k √ºzerine bƒ±rakma
        const treasureChest = document.getElementById('treasure-chest');
        treasureChest.addEventListener('dragover', (e) => {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        });

        treasureChest.addEventListener('drop', (e) => {
            e.preventDefault();
            if (draggedElement) {
                checkAnswer(draggedElement);
            }
        });

        // Cevabƒ± kontrol et
        function checkAnswer(coin) {
            const selectedWord = coin.dataset.word;
            const correctWord = wordData[currentWordIndex].word;
            
            if (selectedWord === correctWord) {
                // Doƒüru cevap
                coin.classList.add('correct');
                coin.classList.add('coin-fly-animation');
                score += 10;
                updateScore();
                
                // Kelimeyi sandƒ±ƒüa ekle
                if (!collectedWords.includes(selectedWord)) {
                    collectedWords.push(selectedWord);
                }
                
                // Sandƒ±k kapaƒüƒ±nƒ± a√ß
                treasureChest.classList.add('open');
                
                // Yƒ±ldƒ±z patlamasƒ± efekti
                createStarExplosion(coin);
                
                // Sandƒ±k i√ßeriƒüini g√ºncelle
                setTimeout(() => {
                    updateTreasureContent();
                }, 800);
                
                // Sonraki kelimeye ge√ß
                setTimeout(() => {
                    treasureChest.classList.remove('open');
                    nextWord();
                }, 1500);
            } else {
                // Yanlƒ±≈ü cevap
                coin.classList.add('wrong');
                
                // Sandƒ±ƒüƒ± kilitli g√∂ster
                treasureChest.classList.add('locked');
                
                setTimeout(() => {
                    coin.classList.remove('wrong');
                    treasureChest.classList.remove('locked');
                }, 1000);
            }
        }


        // Yƒ±ldƒ±z patlamasƒ± efekti
        function createStarExplosion(coin) {
            const starsContainer = document.getElementById('stars-container');
            const rect = coin.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            // 8 yƒ±ldƒ±z olu≈ütur
            for (let i = 0; i < 8; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.textContent = '‚≠ê';
                
                // Yƒ±ldƒ±zlarƒ± farklƒ± y√∂nlere daƒüƒ±t
                const angle = (i * 45) * Math.PI / 180;
                const distance = 100 + Math.random() * 50;
                const x = centerX + Math.cos(angle) * distance;
                const y = centerY + Math.sin(angle) * distance;
                
                star.style.left = x + 'px';
                star.style.top = y + 'px';
                
                starsContainer.appendChild(star);
                
                // Animasyon bitince yƒ±ldƒ±zƒ± kaldƒ±r
                setTimeout(() => {
                    if (star.parentNode) {
                        star.parentNode.removeChild(star);
                    }
                }, 1500);
            }
        }

        // Sonraki kelimeye ge√ß
        function nextWord() {
            // T√ºm kelimeler tamamlandƒ± mƒ± kontrol et
            if (collectedWords.length >= wordData.length) {
                // T√ºm kelimeler bitti
                endGame(true); // true = t√ºm kelimeler bitti
                return;
            }
            
            // Hen√ºz tamamlanmamƒ±≈ü kelimelerden birini se√ß
            const remainingWords = wordData.filter(wordObj => !collectedWords.includes(wordObj.word));
            if (remainingWords.length > 0) {
                currentWordIndex = wordData.findIndex(wordObj => wordObj.word === remainingWords[0].word);
                createWordCoins();
                showCurrentDefinition();
            } else {
                // Bu durumda t√ºm kelimeler tamamlandƒ±
                endGame(true);
            }
        }

        // Puanƒ± g√ºncelle
        function updateScore() {
            document.getElementById('score').textContent = score;
        }

        // Timer'ƒ± ba≈ülat
        function startTimer() {
            const timerInterval = setInterval(() => {
                if (!gameActive) {
                    clearInterval(timerInterval);
                    return;
                }
                
                timeLeft--;
                updateTimer();
                
                if (timeLeft <= 0) {
                    endGame();
                    clearInterval(timerInterval);
                }
            }, 1000);
        }

        // Timer'ƒ± g√ºncelle
        function updateTimer() {
            const timerElement = document.getElementById('timer');
            timerElement.textContent = timeLeft;
            
            if (timeLeft <= 10) {
                document.querySelector('.timer').classList.add('warning');
            }
        }

        // Oyunu bitir
        function endGame(allWordsCompleted = false) {
            gameActive = false;
            document.getElementById('final-score').textContent = score;
            
            // Oyun biti≈ü mesajƒ±nƒ± g√ºncelle
            const gameOverTitle = document.getElementById('game-over-title');
            if (allWordsCompleted) {
                gameOverTitle.innerHTML = 'üéâ Tebrikler! üéâ<br><small>T√ºm kelimeleri kelime hazinenize eklediniz.<br>Oyun Bitti!</small>';
            } else {
                gameOverTitle.innerHTML = 'üéâ Oyun Bitti! üéâ';
            }
            
            document.getElementById('game-over').style.display = 'flex';
        }

        // Oyunu yeniden ba≈ülat
        function restartGame() {
            document.getElementById('game-over').style.display = 'none';
            document.getElementById('start-screen').style.display = 'flex';
            document.querySelector('.timer').classList.remove('warning');
            gameActive = false;
            // S√ºre se√ßimini sƒ±fƒ±rla
            document.getElementById('game-time').value = '60';
        }

        // Array karƒ±≈ütƒ±rma fonksiyonu
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Oyun ba≈ülangƒ±√ß ekranƒ±nda bekliyor
    </script>
</body>
</html>
